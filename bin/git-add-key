#!/bin/bash

echo "Creating an SSH key for you..."

mkdir -p ~/.ssh

# Configure ssh-agent to always use Keychain
echo "Creating ~/.ssh/config"
{
    echo 'Host *'
    echo '  UseKeychain yes'
    echo '  AddKeysToAgent yes'
    echo '  IdentityFile ~/.ssh/id_rsa'
} > ~/.ssh/config

echo "Creating SSH key"
ssh-keygen -t ed25519 -C "$email"

# Add SSH key to Keychain
ssh-add --apple-use-keychain ~/.ssh/id_ed25519

pbcopy < ~/.ssh/id_rsa.pub 
echo "id_rsa.pub has been copied to clipboard"
echo "Please add it to Github \n"
open https://github.com/account/ssh
read -r -p "Press [Enter] key after this..."

